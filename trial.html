<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SmartPark Admin Dashboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            display: flex;
            background-color: #f0f2f5;
            margin: 0;
        }

        .sidebar {
            width: 250px;
            background: #004a99;
            color: white;
            min-height: 100vh;
            padding: 20px;
            position: fixed;
        }

        .sidebar h2 {
            text-align: center;
            margin-bottom: 30px;
            font-size: 24px;
        }

        .sidebar a {
            display: block;
            padding: 15px;
            color: white;
            text-decoration: none;
            transition: 0.3s;
            border-radius: 8px;
            margin-bottom: 5px;
        }

        .sidebar a i {
            margin-right: 10px;
        }

        .sidebar a:hover, .sidebar .active {
            background: #003f7d;
        }

        .main-content {
            margin-left: 270px;
            padding: 40px;
            width: 100%;
        }

        .header {
            margin-bottom: 30px;
        }

        .header h1 {
            color: #333;
        }

        .card-container {
            display: flex;
            gap: 20px;
            margin-bottom: 30px;
        }

        .card {
            background: white;
            padding: 30px 20px;
            border-radius: 12px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            text-align: center;
            width: 30%;
            transition: 0.3s;
            color: #333;
            text-decoration: none;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }

        .card i {
            font-size: 36px;
            margin-bottom: 15px;
            color: #004a99;
        }

        .card h3 {
            font-size: 28px;
            margin: 10px 0;
        }

        .card p {
            color: #666;
            margin: 0;
        }

        .box {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }

        .box h2 {
            margin-top: 0;
            color: #333;
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
        }

        /* Enhanced Recent Activity Styles */
        .activity-item {
            padding: 12px 0;
            border-bottom: 1px solid #f0f0f0;
            display: flex;
            align-items: flex-start;
            transition: all 0.3s ease;
        }
        
        .activity-item:hover {
            background-color: #f9f9f9;
            transform: translateX(5px);
        }
        
        .activity-icon {
            margin-right: 15px;
            font-size: 18px;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }
        
        .parking-icon { background-color: #e3f2fd; color: #1976d2; }
        .user-icon { background-color: #e8f5e9; color: #388e3c; }
        .payment-icon { background-color: #fff8e1; color: #ffa000; }
        .alert-icon { background-color: #ffebee; color: #d32f2f; }
        .system-icon { background-color: #f3e5f5; color: #7b1fa2; }
        
        .activity-content {
            flex-grow: 1;
        }
        
        .activity-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
        }
        
        .activity-title {
            font-weight: 600;
            color: #333;
        }
        
        .activity-time {
            font-size: 12px;
            color: #999;
        }
        
        .activity-desc {
            font-size: 14px;
            color: #666;
            line-height: 1.4;
        }
        
        .activity-priority {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 11px;
            font-weight: bold;
            margin-left: 8px;
        }
        
        .priority-high { background-color: #ffcdd2; color: #c62828; }
        .priority-medium { background-color: #fff9c4; color: #f57f17; }
        .priority-low { background-color: #e0e0e0; color: #616161; }
        
        .activity-actions {
            margin-top: 8px;
            display: flex;
            gap: 10px;
        }
        
        .activity-btn {
            border: none;
            background: none;
            font-size: 12px;
            color: #004a99;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 4px;
        }
        
        .activity-btn:hover {
            text-decoration: underline;
        }
        
        .real-time-indicator {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: #4caf50;
            margin-right: 6px;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(0.95); opacity: 1; }
            50% { transform: scale(1.1); opacity: 0.7; }
            100% { transform: scale(0.95); opacity: 1; }
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        table th, table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        table th {
            background-color: #f8f9fa;
            font-weight: 600;
        }

        table tr:hover {
            background-color: #f5f5f5;
        }
    </style>
</head>
<body>
    <div class="sidebar">
        <h2>SmartPark</h2>
        <a href="trial.html" class="active"><i class="fas fa-home"></i> Dashboard</a>
        <a href="#vehicle"><i class="fas fa-car"></i> Vehicle Management</a>
        <a href="#user"><i class="fas fa-user"></i> User Management</a>
        <a href="#payment"><i class="fas fa-dollar-sign"></i> Payment Management</a>
    </div>

    <div class="main-content">
        <div class="header">
            <h1>Admin Dashboard</h1>
        </div>

        <div class="card-container">
            <a href="#vehicle" class="card">
                <i class="fas fa-car"></i>
                <h3>450</h3>
                <p>Registered Vehicles</p>
            </a>
            <a href="#user" class="card">
                <i class="fas fa-user"></i>
                <h3>320</h3>
                <p>Registered Users</p>
            </a>
            <a href="#payment" class="card">
                <i class="fas fa-dollar-sign"></i>
                <h3>₹1,25,000</h3>
                <p>Total Revenue</p>
            </a>
        </div>

        <!-- Enhanced Recent Activity Section -->
        <div class="box">
            <h2>Recent Activity <span class="real-time-indicator"></span> Live Updates</h2>
            <div class="activity-feed">
                <div class="activity-item">
                    <div class="activity-icon parking-icon">
                        <i class="fas fa-car"></i>
                    </div>
                    <div class="activity-content">
                        <div class="activity-header">
                            <span class="activity-title">Vehicle Parked <span class="activity-priority priority-high">High</span></span>
                            <span class="activity-time">Just now</span>
                        </div>
                        <p class="activity-desc">VIP Vehicle (BMW X5) with ID VH-2023-005 parked at Premium Slot P12 by user John Doe</p>
                        <div class="activity-actions">
                            <button class="activity-btn"><i class="fas fa-eye"></i> View Details</button>
                            <button class="activity-btn"><i class="fas fa-map-marker-alt"></i> Locate</button>
                            <button class="activity-btn"><i class="fas fa-bell"></i> Notify</button>
                        </div>
                    </div>
                </div>
                
                <div class="activity-item">
                    <div class="activity-icon payment-icon">
                        <i class="fas fa-credit-card"></i>
                    </div>
                    <div class="activity-content">
                        <div class="activity-header">
                            <span class="activity-title">Payment Received</span>
                            <span class="activity-time">2 mins ago</span>
                        </div>
                        <p class="activity-desc">Payment of ₹850 received via UPI for parking duration 4h 30m (Vehicle ID: VH-2023-112)</p>
                        <div class="activity-actions">
                            <button class="activity-btn"><i class="fas fa-receipt"></i> View Receipt</button>
                            <button class="activity-btn"><i class="fas fa-print"></i> Print</button>
                        </div>
                    </div>
                </div>
                
                <div class="activity-item">
                    <div class="activity-icon alert-icon">
                        <i class="fas fa-exclamation-triangle"></i>
                    </div>
                    <div class="activity-content">
                        <div class="activity-header">
                            <span class="activity-title">Security Alert <span class="activity-priority priority-high">High</span></span>
                            <span class="activity-time">15 mins ago</span>
                        </div>
                        <p class="activity-desc">Unauthorized access attempt detected at Gate 3. Security personnel notified.</p>
                        <div class="activity-actions">
                            <button class="activity-btn"><i class="fas fa-camera"></i> View Camera</button>
                            <button class="activity-btn"><i class="fas fa-user-shield"></i> Security Panel</button>
                        </div>
                    </div>
                </div>
                
                <div class="activity-item">
                    <div class="activity-icon user-icon">
                        <i class="fas fa-user-plus"></i>
                    </div>
                    <div class="activity-content">
                        <div class="activity-header">
                            <span class="activity-title">New User Registered</span>
                            <span class="activity-time">1 hour ago</span>
                        </div>
                        <p class="activity-desc">Corporate account created for TechSolutions Inc. with 5 vehicle slots allocated.</p>
                        <div class="activity-actions">
                            <button class="activity-btn"><i class="fas fa-user-edit"></i> Edit Profile</button>
                            <button class="activity-btn"><i class="fas fa-envelope"></i> Send Welcome</button>
                        </div>
                    </div>
                </div>
                
                <div class="activity-item">
                    <div class="activity-icon system-icon">
                        <i class="fas fa-cog"></i>
                    </div>
                    <div class="activity-content">
                        <div class="activity-header">
                            <span class="activity-title">System Maintenance <span class="activity-priority priority-medium">Medium</span></span>
                            <span class="activity-time">Today, 03:45 AM</span>
                        </div>
                        <p class="activity-desc">Automatic database backup completed successfully. 2.4GB of data processed.</p>
                        <div class="activity-actions">
                            <button class="activity-btn"><i class="fas fa-server"></i> System Health</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div style="text-align: center; margin-top: 15px;">
                <button id="load-more" style="background: #004a99; color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer;">
                    <i class="fas fa-sync-alt"></i> Load More Activities
                </button>
            </div>
        </div>
    </div>

    <script>
        // Handle page navigation without actual page reloads
        document.addEventListener('DOMContentLoaded', function() {
            // Get current page from URL hash
            const currentPage = window.location.hash || '#dashboard';
            
            // Update active link in sidebar
            updateActiveLink(currentPage);
            
            // Load the appropriate content
            loadPageContent(currentPage);

            // Handle navigation clicks
            document.querySelectorAll('.sidebar a, .card').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const page = this.getAttribute('href');
                    
                    // Update browser URL without reload
                    window.location.hash = page.substring(1);
                    
                    // Load the appropriate content
                    loadPageContent(page);
                    
                    // Update active link
                    updateActiveLink(page);
                });
            });

            // Function to update active link
            function updateActiveLink(page) {
                document.querySelectorAll('.sidebar a').forEach(link => {
                    const linkPage = link.getAttribute('href');
                    if (page === linkPage) {
                        link.classList.add('active');
                    } else {
                        link.classList.remove('active');
                    }
                });
            }

            // Function to load page content dynamically
            function loadPageContent(page) {
                const mainContent = document.querySelector('.main-content');
                
                switch(page) {
                    case '#dashboard':
                    case 'trial.html':
                    case '':
                        mainContent.innerHTML = `
                            <div class="header">
                                <h1>Admin Dashboard</h1>
                            </div>
                            <div class="card-container">
                                <a href="#vehicle" class="card">
                                    <i class="fas fa-car"></i>
                                    <h3>450</h3>
                                    <p>Registered Vehicles</p>
                                </a>
                                <a href="#user" class="card">
                                    <i class="fas fa-user"></i>
                                    <h3>320</h3>
                                    <p>Registered Users</p>
                                </a>
                                <a href="#payment" class="card">
                                    <i class="fas fa-dollar-sign"></i>
                                    <h3>₹1,25,000</h3>
                                    <p>Total Revenue</p>
                                </a>
                            </div>
                            <div class="box">
                                <h2>Recent Activity <span class="real-time-indicator"></span> Live Updates</h2>
                                <div class="activity-feed">
                                    <div class="activity-item">
                                        <div class="activity-icon parking-icon">
                                            <i class="fas fa-car"></i>
                                        </div>
                                        <div class="activity-content">
                                            <div class="activity-header">
                                                <span class="activity-title">Vehicle Parked <span class="activity-priority priority-high">High</span></span>
                                                <span class="activity-time">Just now</span>
                                            </div>
                                            <p class="activity-desc">VIP Vehicle (BMW X5) with ID VH-2023-005 parked at Premium Slot P12 by user John Doe</p>
                                            <div class="activity-actions">
                                                <button class="activity-btn"><i class="fas fa-eye"></i> View Details</button>
                                                <button class="activity-btn"><i class="fas fa-map-marker-alt"></i> Locate</button>
                                                <button class="activity-btn"><i class="fas fa-bell"></i> Notify</button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="activity-item">
                                        <div class="activity-icon payment-icon">
                                            <i class="fas fa-credit-card"></i>
                                        </div>
                                        <div class="activity-content">
                                            <div class="activity-header">
                                                <span class="activity-title">Payment Received</span>
                                                <span class="activity-time">2 mins ago</span>
                                            </div>
                                            <p class="activity-desc">Payment of ₹850 received via UPI for parking duration 4h 30m (Vehicle ID: VH-2023-112)</p>
                                            <div class="activity-actions">
                                                <button class="activity-btn"><i class="fas fa-receipt"></i> View Receipt</button>
                                                <button class="activity-btn"><i class="fas fa-print"></i> Print</button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="activity-item">
                                        <div class="activity-icon alert-icon">
                                            <i class="fas fa-exclamation-triangle"></i>
                                        </div>
                                        <div class="activity-content">
                                            <div class="activity-header">
                                                <span class="activity-title">Security Alert <span class="activity-priority priority-high">High</span></span>
                                                <span class="activity-time">15 mins ago</span>
                                            </div>
                                            <p class="activity-desc">Unauthorized access attempt detected at Gate 3. Security personnel notified.</p>
                                            <div class="activity-actions">
                                                <button class="activity-btn"><i class="fas fa-camera"></i> View Camera</button>
                                                <button class="activity-btn"><i class="fas fa-user-shield"></i> Security Panel</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div style="text-align: center; margin-top: 15px;">
                                    <button id="load-more" style="background: #004a99; color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer;">
                                        <i class="fas fa-sync-alt"></i> Load More Activities
                                    </button>
                                </div>
                            </div>
                        `;
                        setupActivitySection();
                        break;
                        
                    case '#vehicle':
                        mainContent.innerHTML = `
                            <h1>Vehicle Management</h1>
                            <div class="box">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>Vehicle ID</th>
                                            <th>Owner Name</th>
                                            <th>Parking Slot</th>
                                            <th>Status</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>V001</td>
                                            <td>John Doe</td>
                                            <td>A1</td>
                                            <td>Parked</td>
                                        </tr>
                                        <tr>
                                            <td>V002</td>
                                            <td>Jane Smith</td>
                                            <td>B3</td>
                                            <td>In Transit</td>
                                        </tr>
                                        <tr>
                                            <td>V003</td>
                                            <td>Robert Johnson</td>
                                            <td>C2</td>
                                            <td>Parked</td>
                                        </tr>
                                        <tr>
                                            <td>V004</td>
                                            <td>Sarah Williams</td>
                                            <td>A5</td>
                                            <td>Checked Out</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        `;
                        break;
                        
                    case '#user':
                        mainContent.innerHTML = `
                            <h1>User Management</h1>
                            <div class="box">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>User ID</th>
                                            <th>Name</th>
                                            <th>Email</th>
                                            <th>Phone</th>
                                            <th>Status</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>U001</td>
                                            <td>John Doe</td>
                                            <td>john@example.com</td>
                                            <td>9876543210</td>
                                            <td>Active</td>
                                        </tr>
                                        <tr>
                                            <td>U002</td>
                                            <td>Jane Smith</td>
                                            <td>jane@example.com</td>
                                            <td>8765432109</td>
                                            <td>Active</td>
                                        </tr>
                                        <tr>
                                            <td>U003</td>
                                            <td>Robert Johnson</td>
                                            <td>robert@example.com</td>
                                            <td>7654321098</td>
                                            <td>Inactive</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        `;
                        break;
                        
                    case '#payment':
                        mainContent.innerHTML = `
                            <h1>Payment Management</h1>
                            <div class="box">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>Transaction ID</th>
                                            <th>User</th>
                                            <th>Vehicle</th>
                                            <th>Amount</th>
                                            <th>Date</th>
                                            <th>Status</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>TXN001</td>
                                            <td>John Doe</td>
                                            <td>V001</td>
                                            <td>₹500</td>
                                            <td>2023-05-15</td>
                                            <td>Completed</td>
                                        </tr>
                                        <tr>
                                            <td>TXN002</td>
                                            <td>Jane Smith</td>
                                            <td>V002</td>
                                            <td>₹750</td>
                                            <td>2023-05-14</td>
                                            <td>Completed</td>
                                        </tr>
                                        <tr>
                                            <td>TXN003</td>
                                            <td>Robert Johnson</td>
                                            <td>V003</td>
                                            <td>₹600</td>
                                            <td>2023-05-13</td>
                                            <td>Pending</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        `;
                        break;
                }
            }

            // Handle browser back/forward buttons
            window.addEventListener('hashchange', function() {
                const currentPage = window.location.hash || '#dashboard';
                loadPageContent(currentPage);
                updateActiveLink(currentPage);
            });

            // Setup activity section functionality
            function setupActivitySection() {
                // Simulate real-time updates
                function simulateRealTimeUpdates() {
                    const activities = [
                        {
                            icon: 'parking-icon',
                            symbol: 'fa-car',
                            title: 'Vehicle Checked Out',
                            priority: 'low',
                            time: 'Just now',
                            desc: 'Vehicle ID VH-2023-008 checked out from Slot B7. Total parking time: 2h 15m',
                            actions: ['View Details', 'Generate Invoice']
                        },
                        {
                            icon: 'payment-icon',
                            symbol: 'fa-rupee-sign',
                            title: 'Monthly Subscription Payment',
                            priority: '',
                            time: '5 mins ago',
                            desc: 'Auto-debit payment of ₹2,500 received for monthly subscription (User: Robert Johnson)',
                            actions: ['View Invoice', 'Print Receipt']
                        },
                        {
                            icon: 'system-icon',
                            symbol: 'fa-bell',
                            title: 'Slot Sensor Alert',
                            priority: 'medium',
                            time: '25 mins ago',
                            desc: 'Sensor malfunction detected at Slot C3. Maintenance ticket #MT-487 created',
                            actions: ['View Ticket', 'Assign Technician']
                        }
                    ];
                    
                    const feed = document.querySelector('.activity-feed');
                    
                    setInterval(() => {
                        const randomActivity = activities[Math.floor(Math.random() * activities.length)];
                        const timeOptions = ['Just now', '1 min ago', '2 mins ago', '5 mins ago'];
                        const randomTime = timeOptions[Math.floor(Math.random() * timeOptions.length)];
                        
                        const activityEl = document.createElement('div');
                        activityEl.className = 'activity-item';
                        activityEl.innerHTML = `
                            <div class="activity-icon ${randomActivity.icon}">
                                <i class="fas ${randomActivity.symbol}"></i>
                            </div>
                            <div class="activity-content">
                                <div class="activity-header">
                                    <span class="activity-title">${randomActivity.title} ${randomActivity.priority ? `<span class="activity-priority priority-${randomActivity.priority}">${randomActivity.priority.charAt(0).toUpperCase() + randomActivity.priority.slice(1)}</span>` : ''}</span>
                                    <span class="activity-time">${randomTime}</span>
                                </div>
                                <p class="activity-desc">${randomActivity.desc}</p>
                                <div class="activity-actions">
                                    ${randomActivity.actions.map(action => `<button class="activity-btn"><i class="fas fa-${action.split(' ')[0].toLowerCase()}"></i> ${action}</button>`).join('')}
                                </div>
                            </div>
                        `;
                        
                        feed.insertBefore(activityEl, feed.firstChild);
                        
                        // Limit to 10 activities
                        if (feed.children.length > 10) {
                            feed.removeChild(feed.lastChild);
                        }
                        
                        // Highlight new activity
                        activityEl.style.animation = 'highlight 2s';
                        
                    }, 15000); // Every 15 seconds
                }
                
                // Load more activities
                document.getElementById('load-more')?.addEventListener('click', function() {
                    const sampleActivities = [
                        {
                            icon: 'user-icon',
                            symbol: 'fa-user-tag',
                            title: 'User Privilege Updated',
                            priority: '',
                            time: 'Yesterday, 10:30 PM',
                            desc: 'Admin privileges granted to Sarah Williams for Zone B management',
                            actions: ['View Permissions', 'Edit Access']
                        },
                        {
                            icon: 'payment-icon',
                            symbol: 'fa-coins',
                            title: 'Refund Processed',
                            priority: 'medium',
                            time: 'Yesterday, 08:15 PM',
                            desc: 'Refund of ₹350 processed for overpayment (Transaction #TX-4872)',
                            actions: ['View Transaction', 'Print Refund']
                        }
                    ];
                    
                    const feed = document.querySelector('.activity-feed');
                    
                    sampleActivities.forEach(activity => {
                        const activityEl = document.createElement('div');
                        activityEl.className = 'activity-item';
                        activityEl.innerHTML = `
                            <div class="activity-icon ${activity.icon}">
                                <i class="fas ${activity.symbol}"></i>
                            </div>
                            <div class="activity-content">
                                <div class="activity-header">
                                    <span class="activity-title">${activity.title} ${activity.priority ? `<span class="activity-priority priority-${activity.priority}">${activity.priority.charAt(0).toUpperCase() + activity.priority.slice(1)}</span>` : ''}</span>
                                    <span class="activity-time">${activity.time}</span>
                                </div>
                                <p class="activity-desc">${activity.desc}</p>
                                <div class="activity-actions">
                                    ${activity.actions.map(action => `<button class="activity-btn"><i class="fas fa-${action.split(' ')[0].toLowerCase()}"></i> ${action}</button>`).join('')}
                                </div>
                            </div>
                        `;
                        
                        feed.appendChild(activityEl);
                    });
                    
                    this.textContent = 'No More Activities';
                    this.disabled = true;
                });
                
                // Initialize real-time updates when page loads
                simulateRealTimeUpdates();
                
                // Add animation for new items
                const style = document.createElement('style');
                style.textContent = `
                    @keyframes highlight {
                        0% { background-color: rgba(0, 74, 153, 0.1); }
                        100% { background-color: transparent; }
                    }
                `;
                document.head.appendChild(style);
            }

            // Initialize activity section
            setupActivitySection();
        });
    </script>
</body>
</html>